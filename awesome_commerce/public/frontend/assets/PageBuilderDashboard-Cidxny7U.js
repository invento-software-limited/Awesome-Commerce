var le=(v,s,t)=>new Promise((n,m)=>{var c=r=>{try{g(t.next(r))}catch(h){m(h)}},d=r=>{try{g(t.throw(r))}catch(h){m(h)}},g=r=>r.done?n(r.value):Promise.resolve(r.value).then(c,d);g((t=t.apply(v,s)).next())});import{d as S,r as L,c as D,a as b,n as _,b as P,e as U,F as N,f as C,t as k,g as e,o as i,h as oe,i as z,w as x,j,u as o,k as ce,l as p,m as w,P as pe,_ as Q,p as re,q as G,s as W,v as K,U as ne,x as B,y as M,z as me,A as ge,B as se,C as fe,D as be,E as ve,G as he,H as J,I as $}from"./index-CjINglDs.js";import{b as q,S as xe,A as _e,_ as ye,a as ke,c as we}from"./Settings.vue_vue_type_script_setup_true_lang-CuOJkEUn.js";import{_ as X}from"./Dropdown.vue_vue_type_script_setup_true_lang-GiONCyNQ.js";const Ce=["src","alt"],$e=S({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(v){const s=L(!1),t=v,n=D(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[t.size]})[t.shape]),m=D(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[t.size]),c=D(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[t.size]]),d=D(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[t.size]),g=D(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[t.size]),r=D(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[t.size]);function h(a){a.type&&(s.value=!0)}return(a,y)=>(i(),b("div",{class:_(["relative inline-block shrink-0",[m.value,n.value]])},[a.image&&!s.value?(i(),b("img",{key:0,src:a.image,alt:a.label,class:_([n.value,"h-full w-full object-cover"]),onError:y[0]||(y[0]=T=>h(T))},null,42,Ce)):(i(),b("div",{key:1,class:_(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5",[c.value,n.value]])},[a.$slots.default?(i(),b("div",{key:0,class:_(r.value)},[U(a.$slots,"default")],2)):(i(),b(N,{key:1},[C(k(a.label&&a.label[0]),1)],64))],2)),a.$slots.indicator?(i(),b("div",{key:2,class:_(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",d.value])},[e("div",{class:_(g.value)},[U(a.$slots,"indicator")],2)],2)):P("",!0)],2))}}),Le=S({__name:"Badge",props:{theme:{default:"gray"},size:{default:"md"},variant:{default:"subtle"},label:{}},setup(v){const s=v,t=D(()=>{let n={gray:"text-ink-white bg-surface-gray-7",blue:"text-ink-blue-1 bg-surface-blue-2",green:"text-ink-green-1 bg-surface-green-3",orange:"text-ink-amber-1 bg-surface-amber-2",red:"text-ink-red-1 bg-surface-red-4"}[s.theme],m={gray:"text-ink-gray-6 bg-surface-gray-2",blue:"text-ink-blue-2 bg-surface-blue-1",green:"text-ink-green-3 bg-surface-green-2",orange:"text-ink-amber-3 bg-surface-amber-1",red:"text-ink-red-4 bg-surface-red-1"}[s.theme],c={gray:"text-ink-gray-6 bg-transparent border border-outline-gray-1",blue:"text-ink-blue-2 bg-transparent border border-outline-blue-1",green:"text-ink-green-3 bg-transparent border border-outline-green-2",orange:"text-ink-amber-3 bg-transparent border border-outline-amber-2",red:"text-ink-red-4 bg-transparent border border-outline-red-2"}[s.theme],d={gray:"text-ink-gray-6 bg-transparent",blue:"text-ink-blue-2 bg-transparent",green:"text-ink-green-3 bg-transparent",orange:"text-ink-amber-3 bg-transparent",red:"text-ink-red-4 bg-transparent"}[s.theme],g={subtle:m,solid:n,outline:c,ghost:d}[s.variant],r={sm:"h-4 text-xs px-1.5",md:"h-5 text-xs px-1.5",lg:"h-6 text-sm px-2"}[s.size];return[g,r]});return(n,m)=>(i(),b("div",{class:_(["inline-flex select-none items-center gap-1 rounded-full",t.value])},[n.$slots.prefix?(i(),b("div",{key:0,class:_([s.size=="lg"?"max-h-6":"max-h-4"])},[U(n.$slots,"prefix")],2)):P("",!0),U(n.$slots,"default",{},()=>{var c;return[C(k((c=s.label)==null?void 0:c.toString()),1)]}),n.$slots.suffix?(i(),b("div",{key:1,class:_([s.size=="lg"?"max-h-6":"max-h-4"])},[U(n.$slots,"suffix")],2)):P("",!0)],2))}}),ze=["onClick"],Fe={class:"flex gap-2"},Ve={class:"flex w-fit min-w-32 max-w-48 flex-col rounded-lg border border-outline-gray-2 bg-surface-white p-1.5 text-sm text-ink-gray-8 shadow-xl auto-fill-[100px] dark:bg-surface-gray-1"},Be=["href"],Se=["src"],Ie={class:"max-w-18 w-full truncate"},De=S({__name:"AppsMenu",setup(v){const s=oe({url:"builder.api.get_apps",cache:"other_apps",auto:!0});return(t,n)=>{const m=w("FeatherIcon");return i(),z(o(pe),{placement:"right-start",trigger:"hover",hoverDelay:.1,leaveDelay:.1},{target:x(({togglePopover:c,isOpen:d})=>[e("button",{class:_(["flex h-7 w-full items-center justify-between rounded px-2 text-base hover:bg-surface-gray-2",{"bg-surface-gray-2":d}]),onClick:ce(g=>c(),["prevent"])},[e("div",Fe,[p(m,{name:"grid",class:"size-4"}),n[0]||(n[0]=e("span",{class:"text-ink-gray-7"},"Apps",-1))]),p(m,{name:"chevron-right",class:"size-4"})],10,ze)]),body:x(()=>[e("div",Ve,[(i(!0),b(N,null,j(o(s).data,c=>(i(),b("a",{href:c.route,key:"name",class:"flex items-center gap-2 rounded p-1 hover:bg-surface-gray-2"},[e("img",{class:"size-6",src:c.logo},null,8,Se),e("span",Ie,k(c.title),1)],8,Be))),128))])]),_:1})}}}),Me={},Pe={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ae(v,s){return i(),b("svg",Pe,s[0]||(s[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 6.375C9.00102 6.375 9.8125 5.56352 9.8125 4.5625C9.8125 3.56148 9.00102 2.75 8 2.75C6.99898 2.75 6.1875 3.56148 6.1875 4.5625C6.1875 5.56352 6.99898 6.375 8 6.375ZM8 7.375C9.5533 7.375 10.8125 6.1158 10.8125 4.5625C10.8125 3.0092 9.5533 1.75 8 1.75C6.4467 1.75 5.1875 3.0092 5.1875 4.5625C5.1875 6.1158 6.4467 7.375 8 7.375ZM11.9375 13.125C12.9385 13.125 13.75 12.3135 13.75 11.3125C13.75 10.3115 12.9385 9.5 11.9375 9.5C10.9365 9.5 10.125 10.3115 10.125 11.3125C10.125 12.3135 10.9365 13.125 11.9375 13.125ZM11.9375 14.125C13.4908 14.125 14.75 12.8658 14.75 11.3125C14.75 9.7592 13.4908 8.5 11.9375 8.5C10.3842 8.5 9.125 9.7592 9.125 11.3125C9.125 12.8658 10.3842 14.125 11.9375 14.125ZM5.875 11.3125C5.875 12.3135 5.06352 13.125 4.0625 13.125C3.06148 13.125 2.25 12.3135 2.25 11.3125C2.25 10.3115 3.06148 9.5 4.0625 9.5C5.06352 9.5 5.875 10.3115 5.875 11.3125ZM6.875 11.3125C6.875 12.8658 5.6158 14.125 4.0625 14.125C2.5092 14.125 1.25 12.8658 1.25 11.3125C1.25 9.7592 2.5092 8.5 4.0625 8.5C5.6158 8.5 6.875 9.7592 6.875 11.3125Z",fill:"currentColor",style:{fill:"currentColor","fill-opacity":"1"}},null,-1)]))}const Ne=Q(Me,[["render",Ae]]),Ze={},He={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ue(v,s){return i(),b("svg",He,s[0]||(s[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.023 2.5L8.43184 3.68632C8.25916 3.81507 8.04952 3.88462 7.83412 3.88462H2V12.5C2 13.0523 2.44772 13.5 3 13.5H13C13.5523 13.5 14 13.0523 14 12.5V2.5H10.023ZM9.49179 1.64872C9.6213 1.55216 9.77853 1.5 9.94008 1.5H14.35C14.709 1.5 15 1.79101 15 2.15V12.5C15 13.6046 14.1046 14.5 13 14.5H3C1.89543 14.5 1 13.6046 1 12.5V3.53462C1 3.17563 1.29102 2.88462 1.65 2.88462H7.83412L9.49179 1.64872Z",fill:"currentColor"},null,-1)]))}const ie=Q(Ze,[["render",Ue]]),je=S({__name:"NewFolder",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(v,{emit:s}){const t=L(""),c=re(v,"modelValue",s),d=()=>{t.value&&q.insert.submit({folder_name:t.value}).then(()=>{t.value="",c.value=!1})};return(g,r)=>{const h=w("BuilderInput");return i(),z(W,{class:"overscroll-none",modelValue:o(c),"onUpdate:modelValue":r[1]||(r[1]=a=>G(c)?c.value=a:null),options:{title:"Create New Folder",size:"sm",actions:[{label:"Create Folder",variant:"solid",loading:o(q).loading,onClick:d}]}},{"body-content":x(()=>[p(h,{onInput:r[0]||(r[0]=a=>t.value=a),type:"Input",label:"Folder Name",required:!0})]),_:1},8,["modelValue","options"])}}}),Te={class:"sticky bottom-0 left-0 top-0 flex w-60 flex-col gap-3 bg-surface-gray-1 p-2 shadow-lg max-lg:hidden"},Ee={class:"flex flex-col"},Oe={class:"flex flex-col"},Ge={class:"flex items-center justify-between p-2 text-base text-ink-gray-6"},qe=["onClick"],Ke=S({__name:"DashboardSidebar",emits:["openSettings","setActiveFolder"],setup(v,{emit:s}){const t=K(),n=s,m=L(!1),c=g=>t.activeFolder===g,d=g=>{t.activeFolder=g};return(g,r)=>{const h=w("BuilderButton");return i(),b("section",Te,[e("div",Ee,[e("span",{class:_(["flex cursor-pointer gap-2 rounded p-2 text-base text-ink-gray-6",{"bg-surface-modal text-ink-gray-8 shadow-sm dark:bg-surface-gray-2":!o(t).activeFolder}]),onClick:r[0]||(r[0]=()=>d(""))},[p(Ne,{class:"size-4"}),r[4]||(r[4]=C(" All Pages "))],2),e("span",{class:"flex cursor-pointer gap-2 p-2 text-base text-ink-gray-6",onClick:r[1]||(r[1]=a=>n("openSettings"))},[p(xe,{class:"size-4"}),r[5]||(r[5]=C(" Settings "))])]),e("div",Oe,[e("div",Ge,[r[6]||(r[6]=e("span",null,"Folders",-1)),p(h,{variant:"subtle",icon:"plus",class:"size-4 cursor-pointer hover:text-ink-gray-8",onClick:r[2]||(r[2]=a=>m.value=!0)})]),(i(!0),b(N,null,j(o(q).data,a=>(i(),b("span",{class:_(["flex cursor-pointer gap-2 rounded p-2 text-base text-ink-gray-6",{"bg-surface-modal text-ink-gray-8 shadow-sm dark:bg-surface-gray-2":c(a.folder_name)}]),onClick:y=>d(a.folder_name)},[p(ie,{class:"size-4"}),C(" "+k(a.folder_name),1)],10,qe))),256))]),p(je,{modelValue:m.value,"onUpdate:modelValue":r[3]||(r[3]=a=>m.value=a)},null,8,["modelValue"])])}}}),Re=["onClick"],Ye=S({__name:"SelectFolder",props:{currentFolder:{},modelValue:{type:Boolean}},emits:["update:modelValue","folderSelected"],setup(v,{emit:s}){const t=v,n=s,m=re(t,"modelValue",n),c=d=>{d!==t.currentFolder&&(n("folderSelected",d),m.value=!1)};return(d,g)=>{const r=w("FeatherIcon");return i(),z(W,{class:"overscroll-none",modelValue:o(m),"onUpdate:modelValue":g[1]||(g[1]=h=>G(m)?m.value=h:null),options:{title:"Select Folder",size:"sm"}},{"body-content":x(()=>[e("span",{class:_(["flex gap-2 rounded p-2 text-base text-ink-gray-3",{"cursor-pointer text-ink-gray-6 hover:text-ink-gray-9":d.currentFolder}]),onClick:g[0]||(g[0]=h=>c(""))},[p(r,{name:"home",class:"size-4"}),g[2]||(g[2]=C(" Home "))],2),(i(!0),b(N,null,j(o(q).data,h=>(i(),b("span",{class:_(["flex cursor-default gap-2 rounded p-2 text-base text-ink-gray-2",{"cursor-pointer !text-ink-gray-6 hover:!text-ink-gray-9":d.currentFolder!==h.folder_name}]),onClick:a=>c(h.folder_name)},[p(ie,{class:"size-4"}),C(" "+k(h.folder_name),1)],10,Re))),256))]),_:1},8,["modelValue"])}}}),Je=["src"],Qe={class:"flex items-center justify-between border-outline-gray-2"},We={class:"inline-block max-w-[160px]"},Xe={class:"flex items-center gap-1"},et={class:"truncate text-base font-medium text-ink-gray-7 group-hover:text-ink-gray-9"},tt={class:"mt-1 block text-sm text-ink-gray-5 group-hover:text-ink-gray-6"},lt=S({__name:"PageCard",props:{page:{},selected:{type:Boolean}},setup(v){const s=K();return(t,n)=>{const m=w("BuilderButton"),c=w("router-link");return i(),z(c,{to:{name:"builder",params:{pageId:t.page.page_name}}},{default:x(()=>[e("div",{class:_(["group relative flex w-full cursor-pointer flex-col gap-2 rounded-2xl bg-surface-white p-3",{"!bg-surface-gray-2":t.selected}])},[e("img",{width:"250",height:"140",src:t.page.preview,onerror:"this.src='/assets/builder/images/fallback.png'",class:"w-full overflow-hidden rounded-md object-cover shadow dark:border dark:border-outline-gray-1"},null,8,Je),e("div",Qe,[e("span",We,[e("div",Xe,[e("p",et,k(t.page.page_title||t.page.page_name),1)]),p(o(ne),{time:t.page.modified},{default:x(({timeAgo:d})=>[e("p",tt,"Edited "+k(d),1)]),_:1},8,["time"])]),p(o(X),{options:[{group:"Actions",hideLabel:!0,items:[{label:"Duplicate",onClick:()=>o(s).duplicatePage(t.page),icon:"copy"},{label:"View in Desk",onClick:()=>o(s).openInDesk(t.page),icon:"arrow-up-right"}]},{group:"Delete",hideLabel:!0,items:[{label:"Delete",onClick:()=>o(s).deletePage(t.page),icon:"trash"}]}],size:"xs",placement:"right"},{default:x(({open:d})=>[p(m,{icon:"more-horizontal",size:"sm",variant:"subtle",class:"bg-surface-white !text-ink-gray-5 hover:!text-ink-gray-9",onClick:d},null,8,["onClick"])]),_:1},8,["options"])])],2)]),_:1},8,["to"])}}}),st={},at={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ot(v,s){return i(),b("svg",at,s[0]||(s[0]=[e("g",{"clip-path":"url(#clip0_4127_10418)"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 14.25C11.4518 14.25 14.25 11.4518 14.25 8C14.25 5.24123 12.4626 2.89993 9.98263 2.07101L9.83743 4.24899L9.83631 4.26615C9.83212 4.33071 9.82685 4.41202 9.80788 4.49326C9.7914 4.56383 9.76729 4.6324 9.73598 4.69776C9.69995 4.77299 9.65318 4.83972 9.61604 4.89269L9.60617 4.90678L9.57764 4.94765L9.56595 4.96444C9.52223 5.02735 9.46715 5.10659 9.39646 5.17503C9.33509 5.23446 9.26636 5.28577 9.19195 5.32772C9.10624 5.37604 9.01461 5.40633 8.94187 5.43038L8.92245 5.43681L7.0142 6.07217C6.96499 6.08855 6.94071 6.09672 6.92325 6.10326L6.922 6.10373L6.92118 6.10479C6.9098 6.11956 6.89486 6.14037 6.86474 6.1826L6.30923 6.96139L6.29419 6.98255C6.23835 7.06129 6.16804 7.16044 6.07497 7.24074C5.99427 7.31037 5.90296 7.36665 5.8045 7.40745C5.69094 7.4545 5.57077 7.47276 5.47534 7.48727L5.44968 7.49119L5.38645 7.50097L5.36164 7.50486C5.26931 7.5194 5.15304 7.5377 5.03422 7.52834C4.93116 7.52022 4.82998 7.49618 4.7343 7.45705C4.62396 7.41194 4.52836 7.34328 4.45245 7.28875L4.43204 7.27413L2.19597 5.67696C1.90827 6.3951 1.75 7.17907 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25ZM8 1.75C8.33917 1.75 8.67203 1.77702 8.99654 1.82902L8.83965 4.18247C8.83669 4.22684 8.83518 4.24864 8.83361 4.26448L8.8335 4.26559L8.83289 4.26653C8.8242 4.27986 8.81174 4.29781 8.78628 4.33427L8.75774 4.37514C8.72755 4.41837 8.71257 4.43969 8.70114 4.45482L8.70031 4.45591L8.69903 4.45639C8.68128 4.46305 8.65658 4.47136 8.60655 4.48802L6.6983 5.12338L6.67921 5.1297L6.6792 5.12971C6.60764 5.15336 6.5175 5.18316 6.433 5.23046C6.35963 5.27154 6.29174 5.3217 6.23092 5.37977C6.16088 5.44664 6.10592 5.52405 6.06228 5.5855L6.05062 5.60189L5.49511 6.38069C5.45644 6.43491 5.43702 6.46193 5.42207 6.48095L5.42094 6.48239L5.41914 6.48276C5.39543 6.48756 5.36257 6.49277 5.29675 6.50295L5.23352 6.51274C5.16982 6.5226 5.13803 6.5274 5.1148 6.52993L5.11305 6.53011L5.11157 6.52916C5.09196 6.51644 5.06573 6.49786 5.01328 6.46039L2.64778 4.77078C3.74249 2.96027 5.72991 1.75 8 1.75ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.81526 8.0508C7.5855 7.89763 7.27507 7.95971 7.12189 8.18948L6.19298 9.58284C6.11942 9.69318 6.09271 9.82822 6.11871 9.95825L6.58317 12.2805C6.62991 12.5142 6.83512 12.6825 7.07346 12.6825H8.93128C9.08866 12.6825 9.23685 12.6084 9.33128 12.4825L10.7246 10.6246C10.8071 10.5147 10.8407 10.3757 10.8175 10.2402C10.7943 10.1048 10.7163 9.98485 10.602 9.90862L7.81526 8.0508ZM7.13991 9.96522L7.67659 9.1602L9.60752 10.4475L8.68128 11.6825H7.48336L7.13991 9.96522Z",fill:"currentColor"})],-1),e("defs",null,[e("clipPath",{id:"clip0_4127_10418"},[e("rect",{width:"16",height:"16",fill:"transparent"})])],-1)]))}const rt=Q(st,[["render",ot]]),nt={class:"flex w-[90%] gap-3"},it=["src"],dt={class:"flex flex-1 items-start justify-between overflow-hidden"},ut={class:"flex h-full w-full flex-col justify-between text-base"},ct={class:"flex items-center gap-1"},pt=["title"],mt={class:"mt-2 flex items-center gap-2 text-ink-gray-6"},gt={class:"max-w-[90%] truncate text-sm"},ft={class:"flex items-baseline gap-2 text-ink-gray-6"},bt={class:"mt-1 block text-sm"},vt={class:"flex gap-2"},ht=S({__name:"PageListItem",props:{page:{},selected:{type:Boolean}},setup(v){const s=K();return(t,n)=>{const m=w("FeatherIcon"),c=w("router-link");return i(),z(c,{to:{name:"builder",params:{pageId:t.page.page_name}},class:"h-fit w-full"},{default:x(()=>[e("div",{class:_(["group relative flex w-full justify-between overflow-hidden rounded-2xl border-b-[1px] border-outline-gray-1 p-3 hover:cursor-pointer hover:bg-surface-gray-1",{"bg-surface-gray-2":t.selected}])},[e("div",nt,[e("img",{width:"140",height:"82",src:t.page.preview,onerror:"this.src='/assets/builder/images/fallback.png'",class:"block w-36 flex-shrink-0 overflow-hidden rounded-lg bg-surface-gray-1 object-cover shadow-md"},null,8,it),e("div",dt,[e("span",ut,[e("div",null,[e("div",ct,[e("p",{class:"max-w-[90%] truncate font-medium text-ink-gray-9",title:t.page.page_title||t.page.page_name},k(t.page.page_title||t.page.page_name),9,pt)]),e("div",mt,[B(e("div",null,[t.page.authenticated_access?(i(),z(_e,{key:0,title:"Limited access",class:"size-4 text-ink-amber-3"})):(i(),z(rt,{key:1,class:"size-4",title:"Publicly accessible"}))],512),[[M,t.page.published]]),e("p",gt,k(t.page.route),1)])]),e("div",ft,[p(o(ne),{time:t.page.modified},{default:x(({timeAgo:d})=>[e("p",bt,"Last updated "+k(d)+" by "+k(t.page.modified_by),1)]),_:1},8,["time"])])])])]),e("div",vt,[t.page.published?(i(),z(o(Le),{key:0,theme:"green",class:"dark:bg-green-900 dark:text-green-400"},{default:x(()=>n[0]||(n[0]=[C(" Published ")])),_:1,__:[0]})):P("",!0),p(o($e),{shape:"circle",image:null,label:t.page.owner,class:"[&>div]:bg-surface-gray-2 [&>div]:text-ink-gray-4 [&>div]:group-hover:bg-surface-gray-4 [&>div]:group-hover:text-ink-gray-6",size:"sm",title:`Created by ${t.page.owner}`},null,8,["label","title"]),p(o(X),{options:[{label:"Duplicate",onClick:()=>o(s).duplicatePage(t.page),icon:"copy"},{label:"View in Desk",onClick:()=>o(s).openInDesk(t.page),icon:"arrow-up-right"},{label:"Delete",onClick:()=>o(s).deletePage(t.page),icon:"trash"}],size:"sm",placement:"right"},{default:x(({open:d})=>[p(m,{name:"more-horizontal",class:"h-4 w-4 font-bold text-ink-gray-6",onClick:d},null,8,["onClick"])]),_:1},8,["options"])])],2)]),_:1},8,["to"])}}}),ae={mounted(v,s){let t;v.addEventListener("mousedown",()=>{t=setTimeout(()=>{s.value()},300),document.addEventListener("mouseup",()=>{clearTimeout(t)},{once:!0})})}},xt={class:"flex h-screen flex-col"},_t={class:"toolbar sticky top-0 z-10 flex h-12 items-center justify-between border-b-[1px] border-outline-gray-1 bg-surface-white p-2 px-3 py-1",ref:"toolbar"},yt={class:"flex items-center"},kt={class:"flex cursor-pointer items-center gap-2"},wt={class:"flex w-full flex-1 overflow-hidden"},Ct={class:"flex-1 overflow-auto"},$t={class:"m-auto mb-32 flex h-fit w-3/4 max-w-6xl flex-col pt-5"},Lt={class:"sticky top-0 z-20 mb-8 flex items-center justify-between bg-surface-white px-3 py-5"},zt={class:"text-xl font-semibold text-ink-gray-9"},Ft={class:"flex gap-2"},Vt={class:"relative flex"},Bt={class:"max-md:hidden"},St={class:"max-sm:hidden"},It={class:"max-md:hidden"},Dt={key:0,class:"col-span-full"},Mt={key:1,class:"col-span-full"},Pt={key:2,class:"grid-col grid gap-3 auto-fill-[220px]"},At={key:3},jt=S({__name:"PageBuilderDashboard",setup(v){const s=me({attribute:"data-theme"}),t=ge(s),n=K(),m=se("displayType","grid"),c=L(!1),d=L(""),g=L(""),r=se("orderBy","creation"),h={creation:"creation desc",modified:"modified desc",alphabetically_a_z:"page_title asc",alphabetically_z_a:"page_title desc"},a=L(new Set),y=L(!1);fe(()=>{J.capture("builder_dashboard_page_visited")}),be(()=>n.activeFolder,()=>T()),ve(document,"keydown",f=>{f.key==="Escape"&&(a.value.clear(),y.value=!1)});const T=()=>{const f={is_template:0};g.value&&(g.value==="published"?f.published=!0:g.value==="unpublished"?f.published=!1:g.value==="draft"&&(f.draft_blocks=["is","set"]));const l={};d.value&&(l.page_title=["like",`%${d.value}%`],l.route=["like",`%${d.value}%`]),n.activeFolder&&(f.project_folder=n.activeFolder),$.update({filters:f,orFilters:l,orderBy:h[r.value]}),$.fetch()},de=()=>{$.next()},R=L(!1),ee=(f,l)=>{if(y.value){if(f.preventDefault(),f.stopPropagation(),R.value){R.value=!1;return}if(f.shiftKey){const F=$.data||[],V=a.value.size?F.find(I=>I.name===Array.from(a.value)[0]):null;if(V){const I=F.indexOf(V),A=F.indexOf(l),E=Math.min(I,A),O=Math.max(I,A);for(let u=E;u<=O;u++){const H=F[u];a.value.add(H.name)}}}else f.ctrlKey||f.metaKey||a.value.clear(),Y(l)}else J.capture("builder_page_opened",{page_name:l.page_name})},te=f=>{y.value=!0,R.value=!0,Y(f)},Y=f=>{a.value.has(f.name)?a.value.delete(f.name):a.value.add(f.name),a.value.size||(y.value=!1)};he([d,g,r],T,{debounce:300,immediate:!0});const ue=f=>le(this,null,function*(){oe({method:"POST",url:"builder.api.update_page_folder"}).submit({pages:Array.from(a.value),folder_name:f}).then(()=>{var l;for(const F of a.value){const V=(l=$.data)==null?void 0:l.find(I=>I.name===F);V&&(V.project_folder=f)}a.value.clear(),y.value=!1,c.value=!1,n.activeFolder=f})}),Z=L(!1);return(f,l)=>{var E,O;const F=w("FeatherIcon"),V=w("BuilderButton"),I=w("router-link"),A=w("BuilderInput");return i(),b("div",xt,[e("div",_t,[e("div",null,[p(W,{modelValue:Z.value,"onUpdate:modelValue":l[1]||(l[1]=u=>Z.value=u),style:{"z-index":"40"},class:"[&>div>div[id^=headlessui-dialog-panel]]:my-3",options:{title:"Settings",size:"5xl"}},{body:x(()=>[p(ye,{onClose:l[0]||(l[0]=u=>Z.value=!1),onlyGlobal:!0})]),_:1},8,["modelValue"]),e("div",yt,[p(o(X),{options:[{group:"Builder",hideLabel:!0,items:[{label:"New Page",onClick:()=>f.$router.push({name:"builder",params:{pageId:"new"}}),icon:"plus"}]},{group:"Options",hideLabel:!0,items:[{label:"Apps",component:De,icon:"grid"},{label:"Toggle Theme",onClick:()=>o(t)(),icon:o(s)?"sun":"moon"},{label:"Toggle Sidebar",onClick:()=>o(n).showDashboardSidebar=!o(n).showDashboardSidebar,icon:"sidebar"},{label:"Settings",onClick:()=>Z.value=!0,icon:"settings"}]},{group:"Help",hideLabel:!0,items:[{label:"Help",onClick:()=>{f.window.open("https://t.me/frappebuilder")},icon:"info"}]}],size:"sm",class:"flex-1 [&>div>div>div]:w-full",placement:"right"},{default:x(({open:u})=>[e("div",kt,[l[11]||(l[11]=e("img",{src:ke,alt:"logo",class:"h-7"},null,-1)),l[12]||(l[12]=e("h1",{class:"text-md mt-[2px] font-semibold leading-5 text-gray-800 dark:text-gray-200"}," Builder ",-1)),p(F,{name:u?"chevron-up":"chevron-down",class:"h-4 w-4 !text-gray-700 dark:!text-gray-200"},null,8,["name"])])]),_:1},8,["options"])])]),p(I,{to:{name:"builder",params:{pageId:"new"}},onClick:l[2]||(l[2]=()=>{o(J).capture("builder_new_page_created")})},{default:x(()=>[p(V,{variant:"solid",iconLeft:"plus",class:"bg-surface-gray-7 !text-ink-white hover:bg-surface-gray-6"},{default:x(()=>l[13]||(l[13]=[C(" New ")])),_:1,__:[13]})]),_:1})],512),e("div",wt,[B(p(Ke,{onOpenSettings:l[3]||(l[3]=u=>Z.value=!0)},null,512),[[M,o(n).showDashboardSidebar]]),e("div",Ct,[e("section",$t,[e("div",Lt,[e("h1",zt,k(o(n).activeFolder||"All Pages"),1),e("div",Ft,[e("div",null,[B(p(V,{variant:"solid",onClick:l[4]||(l[4]=u=>c.value=!0)},{default:x(()=>l[14]||(l[14]=[C(" Move To Folder ")])),_:1,__:[14]},512),[[M,y.value&&a.value.size]])]),B(e("div",Vt,[p(A,{class:"w-48",type:"text",placeholder:"Filter by title or route",modelValue:d.value,"onUpdate:modelValue":l[5]||(l[5]=u=>d.value=u),autofocus:"",onInput:l[6]||(l[6]=u=>{d.value=u})},{prefix:x(()=>[p(F,{name:"search",class:"size-4 text-ink-gray-5"})]),_:1},8,["modelValue"])],512),[[M,!y.value]]),B(e("div",Bt,[p(A,{type:"select",class:"w-24",modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=u=>g.value=u),options:[{label:"All",value:""},{label:"Draft",value:"draft"},{label:"Published",value:"published"},{label:"Unpublished",value:"unpublished"}]},null,8,["modelValue"])],512),[[M,!y.value]]),B(e("div",St,[p(A,{type:"select",class:"w-32",modelValue:o(r),"onUpdate:modelValue":l[8]||(l[8]=u=>G(r)?r.value=u:null),options:[{label:"Sort",value:"",disabled:!0},{label:"Last Created",value:"creation"},{label:"Last Modified",value:"modified"},{label:"Alphabetically (A-Z)",value:"alphabetically_a_z"},{label:"Alphabetically (Z-A)",value:"alphabetically_z_a"}]},null,8,["modelValue"])],512),[[M,!y.value]]),e("div",It,[p(we,{class:"[&>div]:min-w-0",options:[{label:"Grid",value:"grid",icon:"grid",hideLabel:!0},{label:"List",value:"list",icon:"list",hideLabel:!0}],modelValue:o(m),"onUpdate:modelValue":l[9]||(l[9]=u=>G(m)?m.value=u:null)},null,8,["modelValue"])])])]),e("div",null,[!((E=o($).data)!=null&&E.length)&&!d.value&&!g.value?(i(),b("div",Dt,l[15]||(l[15]=[e("p",{class:"mt-4 px-3 text-base text-gray-500"},` You don't have any pages yet. Click on the "+ New" button to create a new page. `,-1)]))):(O=o($).data)!=null&&O.length?P("",!0):(i(),b("div",Mt,l[16]||(l[16]=[e("p",{class:"mt-4 text-base text-gray-500"},"No matching pages found.",-1)]))),o(m)==="grid"?(i(),b("div",Pt,[(i(!0),b(N,null,j(o($).data,u=>B((i(),z(lt,{selected:a.value.has(u.name),onClickCapture:H=>ee(H,u),key:u.page_name,page:u},null,8,["selected","onClickCapture","page"])),[[o(ae),()=>te(u)]])),128))])):P("",!0),o(m)==="list"?(i(),b("div",At,[(i(!0),b(N,null,j(o($).data,u=>B((i(),z(ht,{onClickCapture:H=>ee(H,u),selected:a.value.has(u.name),key:u.page_name,page:u},null,8,["onClickCapture","selected","page"])),[[o(ae),()=>te(u)]])),128))])):P("",!0)]),B(p(V,{class:"m-auto mt-12 w-fit text-sm",onClick:de,variant:"subtle",size:"sm"},{default:x(()=>l[17]||(l[17]=[C(" Load More ")])),_:1,__:[17]},512),[[M,o($).hasNextPage]])])])]),p(Ye,{modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=u=>c.value=u),currentFolder:o(n).activeFolder,onFolderSelected:ue},null,8,["modelValue","currentFolder"])])}}});export{jt as default};
//# sourceMappingURL=PageBuilderDashboard-Cidxny7U.js.map
