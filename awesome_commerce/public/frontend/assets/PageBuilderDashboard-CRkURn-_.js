var j=(x,l,e)=>new Promise((n,f)=>{var i=b=>{try{m(e.next(b))}catch(p){f(p)}},u=b=>{try{m(e.throw(b))}catch(p){f(p)}},m=b=>b.done?n(b.value):Promise.resolve(b.value).then(i,u);m((e=e.apply(x,l)).next())});import{d as P,r as C,c as A,a as v,o as r,n as w,b as V,e as O,F as Z,f as L,t as k,g as t,h as G,i as z,j as $,w as y,k as K,u as o,l as be,m as d,P as ve,_ as Q,p as de,q as J,s as le,v as he,x as te,y as _e,z as oe,A as ue,B as ne,C as xe,D as ce,U as pe,E as me,G as M,H as T,I as ye,J as Ce,K as we,L as ke,M as $e,N as F,O as Le,Q as ee}from"./index-HlVA34VQ.js";import{b as H,S as ze,_ as Fe,A as Ve,a as Se,c as Be,d as Me}from"./Settings.vue_vue_type_script_setup_true_lang-DSpH0Pey.js";import{_ as Y}from"./Dropdown.vue_vue_type_script_setup_true_lang-B0tMPLRs.js";const Pe=["src","alt"],De=P({__name:"Avatar",props:{image:{},label:{},size:{default:"md"},shape:{default:"circle"}},setup(x){const l=C(!1),e=x,n=A(()=>({circle:"rounded-full",square:{xs:"rounded-[4px]",sm:"rounded-[5px]",md:"rounded-[5px]",lg:"rounded-[6px]",xl:"rounded-[6px]","2xl":"rounded-[8px]","3xl":"rounded-[10px]"}[e.size]})[e.shape]),f=A(()=>({xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-7 h-7",xl:"w-8 h-8","2xl":"w-10 h-10","3xl":"w-11.5 h-11.5"})[e.size]),i=A(()=>["font-medium",{xs:"text-2xs",sm:"text-sm",md:"text-base",lg:"text-base",xl:"text-lg","2xl":"text-xl","3xl":"text-2xl"}[e.size]]),u=A(()=>({xs:"-mr-[.1rem] -mb-[.1rem] h-2 w-2",sm:"-mr-[.1rem] -mb-[.1rem] h-[9px] w-[9px]",md:"-mr-[.1rem] -mb-[.1rem] h-2.5 w-2.5",lg:"-mr-[.1rem] -mb-[.1rem] h-3 w-3",xl:"-mr-[.1rem] -mb-[.1rem] h-3 w-3","2xl":"-mr-[.1rem] -mb-[.1rem] h-3.5 w-3.5","3xl":"-mr-[.2rem] -mb-[.2rem] h-4 w-4"})[e.size]),m=A(()=>({xs:"h-1 w-1",sm:"h-[5px] w-[5px]",md:"h-1.5 w-1.5",lg:"h-2 w-2",xl:"h-2 w-2","2xl":"h-2.5 w-2.5","3xl":"h-3 w-3"})[e.size]),b=A(()=>({xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-4 w-4","2xl":"h-5 w-5","3xl":"h-5 w-5"})[e.size]);function p(a){a.type&&(l.value=!0)}return(a,g)=>(r(),v("div",{class:w(["relative inline-block shrink-0",[f.value,n.value]])},[a.image&&!l.value?(r(),v("img",{key:0,src:a.image,alt:a.label,class:w([n.value,"h-full w-full object-cover"]),onError:g[0]||(g[0]=h=>p(h))},null,42,Pe)):(r(),v("div",{key:1,class:w(["flex h-full w-full items-center justify-center bg-surface-gray-2 uppercase text-ink-gray-5",[i.value,n.value]])},[a.$slots.default?(r(),v("div",{key:0,class:w(b.value)},[O(a.$slots,"default")],2)):(r(),v(Z,{key:1},[L(k(a.label&&a.label[0]),1)],64))],2)),a.$slots.indicator?(r(),v("div",{key:2,class:w(["absolute bottom-0 right-0 grid place-items-center rounded-full bg-surface-white",u.value])},[t("div",{class:w(m.value)},[O(a.$slots,"indicator")],2)],2)):V("",!0)],2))}}),Ie=P({__name:"Badge",props:{theme:{default:"gray"},size:{default:"md"},variant:{default:"subtle"},label:{}},setup(x){const l=x,e=A(()=>{let n={gray:"text-ink-white bg-surface-gray-7",blue:"text-ink-blue-1 bg-surface-blue-2",green:"text-ink-green-1 bg-surface-green-3",orange:"text-ink-amber-1 bg-surface-amber-2",red:"text-ink-red-1 bg-surface-red-4"}[l.theme],f={gray:"text-ink-gray-6 bg-surface-gray-2",blue:"text-ink-blue-2 bg-surface-blue-1",green:"text-ink-green-3 bg-surface-green-2",orange:"text-ink-amber-3 bg-surface-amber-1",red:"text-ink-red-4 bg-surface-red-1"}[l.theme],i={gray:"text-ink-gray-6 bg-transparent border border-outline-gray-1",blue:"text-ink-blue-2 bg-transparent border border-outline-blue-1",green:"text-ink-green-3 bg-transparent border border-outline-green-2",orange:"text-ink-amber-3 bg-transparent border border-outline-amber-2",red:"text-ink-red-4 bg-transparent border border-outline-red-2"}[l.theme],u={gray:"text-ink-gray-6 bg-transparent",blue:"text-ink-blue-2 bg-transparent",green:"text-ink-green-3 bg-transparent",orange:"text-ink-amber-3 bg-transparent",red:"text-ink-red-4 bg-transparent"}[l.theme],m={subtle:f,solid:n,outline:i,ghost:u}[l.variant],b={sm:"h-4 text-xs px-1.5",md:"h-5 text-xs px-1.5",lg:"h-6 text-sm px-2"}[l.size];return[m,b]});return(n,f)=>(r(),v("div",{class:w(["inline-flex select-none items-center gap-1 rounded-full",e.value])},[n.$slots.prefix?(r(),v("div",{key:0,class:w([l.size=="lg"?"max-h-6":"max-h-4"])},[O(n.$slots,"prefix")],2)):V("",!0),O(n.$slots,"default",{},()=>{var i;return[L(k((i=l.label)==null?void 0:i.toString()),1)]}),n.$slots.suffix?(r(),v("div",{key:1,class:w([l.size=="lg"?"max-h-6":"max-h-4"])},[O(n.$slots,"suffix")],2)):V("",!0)],2))}}),Ae=["onClick"],He={class:"flex gap-2"},Te={class:"flex w-fit min-w-32 max-w-48 flex-col rounded-lg border border-outline-gray-2 bg-surface-white p-1.5 text-sm text-ink-gray-8 shadow-xl auto-fill-[100px] dark:bg-surface-gray-1"},Ue=["href"],Ze=["src"],Ne={class:"max-w-18 w-full truncate"},Ee=P({__name:"AppsMenu",setup(x){const l=G({url:"builder.api.get_apps",cache:"other_apps",auto:!0});return(e,n)=>{const f=z("FeatherIcon");return r(),$(o(ve),{placement:"right-start",trigger:"hover",hoverDelay:.1,leaveDelay:.1},{target:y(({togglePopover:i,isOpen:u})=>[t("button",{class:w(["flex h-7 w-full items-center justify-between rounded px-2 text-base hover:bg-surface-gray-2",{"bg-surface-gray-2":u}]),onClick:be(m=>i(),["prevent"])},[t("div",He,[d(f,{name:"grid",class:"size-4"}),n[0]||(n[0]=t("span",{class:"text-ink-gray-7"},"Apps",-1))]),d(f,{name:"chevron-right",class:"size-4"})],10,Ae)]),body:y(()=>[t("div",Te,[(r(!0),v(Z,null,K(o(l).data,i=>(r(),v("a",{href:i.route,key:"name",class:"flex items-center gap-2 rounded p-1 hover:bg-surface-gray-2"},[t("img",{class:"size-6",src:i.logo},null,8,Ze),t("span",Ne,k(i.title),1)],8,Ue))),128))])]),_:1})}}}),je={},Oe={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ge(x,l){return r(),v("svg",Oe,l[0]||(l[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 6.375C9.00102 6.375 9.8125 5.56352 9.8125 4.5625C9.8125 3.56148 9.00102 2.75 8 2.75C6.99898 2.75 6.1875 3.56148 6.1875 4.5625C6.1875 5.56352 6.99898 6.375 8 6.375ZM8 7.375C9.5533 7.375 10.8125 6.1158 10.8125 4.5625C10.8125 3.0092 9.5533 1.75 8 1.75C6.4467 1.75 5.1875 3.0092 5.1875 4.5625C5.1875 6.1158 6.4467 7.375 8 7.375ZM11.9375 13.125C12.9385 13.125 13.75 12.3135 13.75 11.3125C13.75 10.3115 12.9385 9.5 11.9375 9.5C10.9365 9.5 10.125 10.3115 10.125 11.3125C10.125 12.3135 10.9365 13.125 11.9375 13.125ZM11.9375 14.125C13.4908 14.125 14.75 12.8658 14.75 11.3125C14.75 9.7592 13.4908 8.5 11.9375 8.5C10.3842 8.5 9.125 9.7592 9.125 11.3125C9.125 12.8658 10.3842 14.125 11.9375 14.125ZM5.875 11.3125C5.875 12.3135 5.06352 13.125 4.0625 13.125C3.06148 13.125 2.25 12.3135 2.25 11.3125C2.25 10.3115 3.06148 9.5 4.0625 9.5C5.06352 9.5 5.875 10.3115 5.875 11.3125ZM6.875 11.3125C6.875 12.8658 5.6158 14.125 4.0625 14.125C2.5092 14.125 1.25 12.8658 1.25 11.3125C1.25 9.7592 2.5092 8.5 4.0625 8.5C5.6158 8.5 6.875 9.7592 6.875 11.3125Z",fill:"currentColor",style:{fill:"currentColor","fill-opacity":"1"}},null,-1)]))}const Ke=Q(je,[["render",Ge]]),qe={},Re={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Je(x,l){return r(),v("svg",Re,l[0]||(l[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.023 2.5L8.43184 3.68632C8.25916 3.81507 8.04952 3.88462 7.83412 3.88462H2V12.5C2 13.0523 2.44772 13.5 3 13.5H13C13.5523 13.5 14 13.0523 14 12.5V2.5H10.023ZM9.49179 1.64872C9.6213 1.55216 9.77853 1.5 9.94008 1.5H14.35C14.709 1.5 15 1.79101 15 2.15V12.5C15 13.6046 14.1046 14.5 13 14.5H3C1.89543 14.5 1 13.6046 1 12.5V3.53462C1 3.17563 1.29102 2.88462 1.65 2.88462H7.83412L9.49179 1.64872Z",fill:"currentColor"},null,-1)]))}const ge=Q(qe,[["render",Je]]),Qe=P({__name:"NewFolder",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(x,{emit:l}){const e=C(""),i=de(x,"modelValue",l),u=()=>{e.value&&H.insert.submit({folder_name:e.value}).then(()=>{e.value="",i.value=!1})};return(m,b)=>{const p=z("BuilderInput");return r(),$(le,{class:"overscroll-none",modelValue:o(i),"onUpdate:modelValue":b[1]||(b[1]=a=>J(i)?i.value=a:null),options:{title:"Create New Folder",size:"sm",actions:[{label:"Create Folder",variant:"solid",loading:o(H).loading,onClick:u}]}},{"body-content":y(()=>[d(p,{onInput:b[0]||(b[0]=a=>e.value=a),modelValue:e.value,type:"Input",autofocus:!0,label:"Folder Name",required:!0},null,8,["modelValue"])]),_:1},8,["modelValue","options"])}}});C(!1);C(!1);he({});te("onboardingStatus",{});C(!1);const Ye={},We={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Xe(x,l){return r(),v("svg",We,l[0]||(l[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z",fill:"currentColor"},null,-1)]))}const re=Q(Ye,[["render",Xe]]),et={key:0,class:"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base"},tt={class:"flex flex-col gap-1"},lt={class:"inline-flex text-ink-gray-9 gap-2 items-center font-medium"},at="Upgrade to a paid plan for uninterrupted services",st={__name:"TrialBanner",props:{isSidebarCollapsed:{type:Boolean,default:!1},afterUpgrade:{type:Function,default:()=>{}}},setup(x){const l=x,e=C(0),n=C(!1),f=C("https://frappecloud.com"),i=C(""),u=A(()=>e.value>1?"Trial ends in "+e.value+" days":"Trial ends tomorrow");G({url:"frappe.integrations.frappe_providers.frappecloud_billing.current_site_info",cache:"current_site_info_data",auto:!0,onSuccess:p=>{e.value=m(p.trial_end_date),f.value=p.base_url,i.value=p.site_name,n.value=p.setup_complete&&p.plan.is_trial_plan&&e.value>0}});function m(p){if(!p)return 0;p=new Date(p);const g=p-new Date;return Math.ceil(g/(1e3*60*60*24))}function b(){var p;window.open(`${f.value}/dashboard/sites/${i.value}`,"_blank"),(p=l.afterUpgrade)==null||p.call(l)}return(p,a)=>!x.isSidebarCollapsed&&n.value?(r(),v("div",et,[t("div",tt,[t("div",lt,[d(_e,{class:"h-4",name:"info"}),L(" "+k(u.value),1)]),t("div",{class:"text-ink-gray-7 text-p-sm"},k(at))]),d(o(oe),{label:"Upgrade plan",theme:"blue",onClick:b},{prefix:y(()=>[d(re,{class:"size-4"})]),_:1})])):x.isSidebarCollapsed&&n.value?(r(),$(o(oe),{key:1,onClick:b},{default:y(()=>[d(re,{class:"h-4 my-0.5 shrink-0"})]),_:1})):V("",!0)}},ot={class:"sticky bottom-0 left-0 top-0 flex w-60 flex-col gap-3 bg-surface-gray-1 p-2 shadow-lg max-lg:hidden"},nt={class:"flex flex-col"},rt={class:"flex flex-1 flex-col"},it={class:"flex items-center justify-between p-2 text-base text-ink-gray-6"},dt=["onClick"],ut={class:"flex flex-1 gap-1"},ct=P({__name:"DashboardSidebar",emits:["openSettings"],setup(x,{emit:l}){const e=ue(),n=C(""),f=l,i=C(!1),u=a=>e.activeFolder===a,m=a=>{e.activeFolder=a},b=(a,g)=>j(this,null,function*(){if(a)return G({url:"frappe.client.rename_doc"}).submit({doctype:"Builder Project Folder",old_name:g.folder_name,new_name:a}).then(()=>{H.data=H.data.map(h=>(h.folder_name===e.activeFolder&&(h.folder_name=a),h)),m(a)})}),p=a=>j(this,null,function*(){(yield xe('Are you sure you want to delete this folder? All the pages under this folder will be visible under "All Pages"'))&&(yield G({url:"builder.api.delete_folder",method:"POST",params:{folder_name:a},auto:!0}),H.data=H.data.filter(h=>h.folder_name!==a),m(""))});return(a,g)=>(r(),v("section",ot,[t("div",nt,[t("span",{class:w(["flex cursor-pointer gap-2 rounded p-2 text-base text-ink-gray-6",{"bg-surface-modal text-ink-gray-8 shadow-sm dark:bg-surface-gray-2":!o(e).activeFolder}]),onClick:g[0]||(g[0]=()=>m(""))},[d(Ke,{class:"size-4"}),g[4]||(g[4]=L(" All Pages "))],2),t("span",{class:"flex cursor-pointer gap-2 p-2 text-base text-ink-gray-6",onClick:g[1]||(g[1]=h=>f("openSettings"))},[d(ze,{class:"size-4"}),g[5]||(g[5]=L(" Settings "))])]),t("div",rt,[t("div",it,[g[6]||(g[6]=t("span",null,"Folders",-1)),d(ne,{variant:"subtle",icon:"plus",class:"size-4 cursor-pointer hover:text-ink-gray-8",onClick:g[2]||(g[2]=h=>i.value=!0)})]),(r(!0),v(Z,null,K(o(H).data,h=>(r(),v("span",{class:w(["flex h-8 w-full cursor-pointer items-center justify-between gap-2 rounded p-2 py-1 text-base text-ink-gray-6",{"bg-surface-modal text-ink-gray-8 shadow-sm dark:bg-surface-gray-2":u(h.folder_name)}]),onClick:D=>m(h.folder_name)},[t("span",ut,[d(ge,{class:"size-4"}),d(Fe,{modelValue:h.folder_name,"onUpdate:modelValue":D=>h.folder_name=D,editable:n.value===h.folder_name,onChange:D=>j(this,null,function*(){yield b(D,h),n.value=""}),class:"w-full"},{default:y(()=>[L(k(h.folder_name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","editable","onChange"])]),u(h.folder_name)?(r(),$(o(Y),{key:0,placement:"right",options:[{label:"Rename",onClick:()=>{n.value=h.folder_name},icon:"edit"},{label:"Delete Folder",onClick:()=>p(h.folder_name),icon:"trash"}]},{default:y(({open:D})=>[d(ne,{icon:"more-horizontal",size:"sm",variant:"ghost",onClick:D},null,8,["onClick"])]),_:2},1032,["options"])):V("",!0)],10,dt))),256))]),d(Qe,{modelValue:i.value,"onUpdate:modelValue":g[3]||(g[3]=h=>i.value=h)},null,8,["modelValue"]),o(e).isFCSite?(r(),$(o(st),{key:0})):V("",!0)]))}}),pt=["onClick"],mt=P({__name:"SelectFolder",props:{currentFolder:{},modelValue:{type:Boolean}},emits:["update:modelValue","folderSelected"],setup(x,{emit:l}){const e=x,n=l,f=de(e,"modelValue",n),i=u=>{u!==e.currentFolder&&(n("folderSelected",u),f.value=!1)};return(u,m)=>{const b=z("FeatherIcon");return r(),$(le,{class:"overscroll-none",modelValue:o(f),"onUpdate:modelValue":m[1]||(m[1]=p=>J(f)?f.value=p:null),options:{title:"Select Folder",size:"sm"}},{"body-content":y(()=>[t("span",{class:w(["flex gap-2 rounded p-2 text-base text-ink-gray-3",{"cursor-pointer text-ink-gray-6 hover:text-ink-gray-9":u.currentFolder}]),onClick:m[0]||(m[0]=p=>i(""))},[d(b,{name:"home",class:"size-4"}),m[2]||(m[2]=L(" Home "))],2),(r(!0),v(Z,null,K(o(H).data,p=>(r(),v("span",{class:w(["flex cursor-default gap-2 rounded p-2 text-base text-ink-gray-2",{"cursor-pointer !text-ink-gray-6 hover:!text-ink-gray-9":u.currentFolder!==p.folder_name}]),onClick:a=>i(p.folder_name)},[d(ge,{class:"size-4"}),L(" "+k(p.folder_name),1)],10,pt))),256))]),_:1},8,["modelValue"])}}}),gt=["src"],ft={class:"flex items-center justify-between border-outline-gray-2"},bt={class:"inline-block max-w-[160px]"},vt={class:"flex items-center gap-1"},ht={class:"truncate text-base font-medium text-ink-gray-7 group-hover:text-ink-gray-9"},_t={class:"mt-1 block text-sm text-ink-gray-5 group-hover:text-ink-gray-6"},xt=P({__name:"PageCard",props:{page:{},selected:{type:Boolean}},setup(x){const l=ce();return(e,n)=>{const f=z("BuilderButton"),i=z("router-link");return r(),$(i,{to:{name:"builder",params:{pageId:e.page.page_name}}},{default:y(()=>[t("div",{class:w(["group relative flex w-full cursor-pointer flex-col gap-2 rounded-2xl bg-surface-white p-3",{"!bg-surface-gray-2":e.selected}])},[t("img",{width:"250",height:"140",src:e.page.preview,onerror:"this.src='/assets/builder/images/fallback.png'",class:"w-full overflow-hidden rounded-md object-cover shadow dark:border dark:border-outline-gray-1"},null,8,gt),t("div",ft,[t("span",bt,[t("div",vt,[t("p",ht,k(e.page.page_title||e.page.page_name),1)]),d(o(pe),{time:e.page.modified},{default:y(({timeAgo:u})=>[t("p",_t,"Edited "+k(u),1)]),_:1},8,["time"])]),d(o(Y),{options:[{group:"Actions",hideLabel:!0,items:[{label:"Duplicate",onClick:()=>o(l).duplicatePage(e.page),icon:"copy"},{label:"View in Desk",onClick:()=>o(me)(e.page),icon:"arrow-up-right"}]},{group:"Delete",hideLabel:!0,items:[{label:"Delete",onClick:()=>o(l).deletePage(e.page),icon:"trash"}]}],size:"xs",placement:"right"},{default:y(({open:u})=>[d(f,{icon:"more-horizontal",size:"sm",variant:"subtle",class:"bg-surface-white !text-ink-gray-5 hover:!text-ink-gray-9",onClick:u},null,8,["onClick"])]),_:1},8,["options"])])],2)]),_:1},8,["to"])}}}),yt={},Ct={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function wt(x,l){return r(),v("svg",Ct,l[0]||(l[0]=[t("g",{"clip-path":"url(#clip0_4127_10418)"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 14.25C11.4518 14.25 14.25 11.4518 14.25 8C14.25 5.24123 12.4626 2.89993 9.98263 2.07101L9.83743 4.24899L9.83631 4.26615C9.83212 4.33071 9.82685 4.41202 9.80788 4.49326C9.7914 4.56383 9.76729 4.6324 9.73598 4.69776C9.69995 4.77299 9.65318 4.83972 9.61604 4.89269L9.60617 4.90678L9.57764 4.94765L9.56595 4.96444C9.52223 5.02735 9.46715 5.10659 9.39646 5.17503C9.33509 5.23446 9.26636 5.28577 9.19195 5.32772C9.10624 5.37604 9.01461 5.40633 8.94187 5.43038L8.92245 5.43681L7.0142 6.07217C6.96499 6.08855 6.94071 6.09672 6.92325 6.10326L6.922 6.10373L6.92118 6.10479C6.9098 6.11956 6.89486 6.14037 6.86474 6.1826L6.30923 6.96139L6.29419 6.98255C6.23835 7.06129 6.16804 7.16044 6.07497 7.24074C5.99427 7.31037 5.90296 7.36665 5.8045 7.40745C5.69094 7.4545 5.57077 7.47276 5.47534 7.48727L5.44968 7.49119L5.38645 7.50097L5.36164 7.50486C5.26931 7.5194 5.15304 7.5377 5.03422 7.52834C4.93116 7.52022 4.82998 7.49618 4.7343 7.45705C4.62396 7.41194 4.52836 7.34328 4.45245 7.28875L4.43204 7.27413L2.19597 5.67696C1.90827 6.3951 1.75 7.17907 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25ZM8 1.75C8.33917 1.75 8.67203 1.77702 8.99654 1.82902L8.83965 4.18247C8.83669 4.22684 8.83518 4.24864 8.83361 4.26448L8.8335 4.26559L8.83289 4.26653C8.8242 4.27986 8.81174 4.29781 8.78628 4.33427L8.75774 4.37514C8.72755 4.41837 8.71257 4.43969 8.70114 4.45482L8.70031 4.45591L8.69903 4.45639C8.68128 4.46305 8.65658 4.47136 8.60655 4.48802L6.6983 5.12338L6.67921 5.1297L6.6792 5.12971C6.60764 5.15336 6.5175 5.18316 6.433 5.23046C6.35963 5.27154 6.29174 5.3217 6.23092 5.37977C6.16088 5.44664 6.10592 5.52405 6.06228 5.5855L6.05062 5.60189L5.49511 6.38069C5.45644 6.43491 5.43702 6.46193 5.42207 6.48095L5.42094 6.48239L5.41914 6.48276C5.39543 6.48756 5.36257 6.49277 5.29675 6.50295L5.23352 6.51274C5.16982 6.5226 5.13803 6.5274 5.1148 6.52993L5.11305 6.53011L5.11157 6.52916C5.09196 6.51644 5.06573 6.49786 5.01328 6.46039L2.64778 4.77078C3.74249 2.96027 5.72991 1.75 8 1.75ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.81526 8.0508C7.5855 7.89763 7.27507 7.95971 7.12189 8.18948L6.19298 9.58284C6.11942 9.69318 6.09271 9.82822 6.11871 9.95825L6.58317 12.2805C6.62991 12.5142 6.83512 12.6825 7.07346 12.6825H8.93128C9.08866 12.6825 9.23685 12.6084 9.33128 12.4825L10.7246 10.6246C10.8071 10.5147 10.8407 10.3757 10.8175 10.2402C10.7943 10.1048 10.7163 9.98485 10.602 9.90862L7.81526 8.0508ZM7.13991 9.96522L7.67659 9.1602L9.60752 10.4475L8.68128 11.6825H7.48336L7.13991 9.96522Z",fill:"currentColor"})],-1),t("defs",null,[t("clipPath",{id:"clip0_4127_10418"},[t("rect",{width:"16",height:"16",fill:"transparent"})])],-1)]))}const kt=Q(yt,[["render",wt]]),$t={class:"flex w-[90%] gap-3"},Lt=["src"],zt={class:"flex flex-1 items-start justify-between overflow-hidden"},Ft={class:"flex h-full w-full flex-col justify-between text-base"},Vt={class:"flex items-center gap-1"},St=["title"],Bt={class:"mt-2 flex items-center gap-2 text-ink-gray-6"},Mt={class:"max-w-[90%] truncate text-sm"},Pt={class:"flex items-baseline gap-2 text-ink-gray-6"},Dt={class:"mt-1 block text-sm"},It={class:"flex gap-2"},At=P({__name:"PageListItem",props:{page:{},selected:{type:Boolean}},setup(x){const l=ce();return(e,n)=>{const f=z("FeatherIcon"),i=z("router-link");return r(),$(i,{to:{name:"builder",params:{pageId:e.page.page_name}},class:"h-fit w-full"},{default:y(()=>[t("div",{class:w(["group relative flex w-full justify-between overflow-hidden rounded-2xl border-b-[1px] border-outline-gray-1 p-3 hover:cursor-pointer hover:bg-surface-gray-1",{"bg-surface-gray-2":e.selected}])},[t("div",$t,[t("img",{width:"140",height:"82",src:e.page.preview,onerror:"this.src='/assets/builder/images/fallback.png'",class:"block w-36 flex-shrink-0 overflow-hidden rounded-lg bg-surface-gray-1 object-cover shadow-md"},null,8,Lt),t("div",zt,[t("span",Ft,[t("div",null,[t("div",Vt,[t("p",{class:"max-w-[90%] truncate font-medium text-ink-gray-9",title:e.page.page_title||e.page.page_name},k(e.page.page_title||e.page.page_name),9,St)]),t("div",Bt,[M(t("div",null,[e.page.authenticated_access?(r(),$(Ve,{key:0,title:"Limited access",class:"size-4 text-ink-amber-3"})):(r(),$(kt,{key:1,class:"size-4",title:"Publicly accessible"}))],512),[[T,e.page.published]]),t("p",Mt,k(e.page.route),1)])]),t("div",Pt,[d(o(pe),{time:e.page.modified},{default:y(({timeAgo:u})=>[t("p",Dt,"Last updated "+k(u)+" by "+k(e.page.modified_by),1)]),_:1},8,["time"])])])])]),t("div",It,[e.page.published?(r(),$(o(Ie),{key:0,theme:"green",class:"dark:bg-green-900 dark:text-green-400"},{default:y(()=>n[0]||(n[0]=[L(" Published ")])),_:1,__:[0]})):V("",!0),d(o(De),{shape:"circle",label:e.page.owner,class:"[&>div]:bg-surface-gray-2 [&>div]:text-ink-gray-4 [&>div]:group-hover:bg-surface-gray-4 [&>div]:group-hover:text-ink-gray-6",size:"sm",title:`Created by ${e.page.owner}`},null,8,["label","title"]),d(o(Y),{options:[{label:"Duplicate",onClick:()=>o(l).duplicatePage(e.page),icon:"copy"},{label:"View in Desk",onClick:()=>o(me)(e.page),icon:"arrow-up-right"},{label:"Delete",onClick:()=>o(l).deletePage(e.page),icon:"trash"}],size:"sm",placement:"right"},{default:y(({open:u})=>[d(f,{name:"more-horizontal",class:"h-4 w-4 font-bold text-ink-gray-6",onClick:u},null,8,["onClick"])]),_:1},8,["options"])])],2)]),_:1},8,["to"])}}}),ie={mounted(x,l){let e;x.addEventListener("mousedown",()=>{e=setTimeout(()=>{l.value()},300),document.addEventListener("mouseup",()=>{clearTimeout(e)},{once:!0})})}},Ht={class:"flex h-screen flex-col"},Tt={class:"toolbar sticky top-0 z-10 flex h-12 items-center justify-between border-b-[1px] border-outline-gray-1 bg-surface-white p-2 px-3 py-1",ref:"toolbar"},Ut={class:"flex items-center"},Zt={class:"flex cursor-pointer items-center gap-2"},Nt={class:"flex w-full flex-1 overflow-hidden"},Et={class:"flex-1 overflow-auto"},jt={class:"m-auto mb-32 flex h-fit w-3/4 max-w-6xl flex-col pt-5"},Ot={class:"sticky top-0 z-20 mb-8 flex items-center justify-between bg-surface-white px-3 py-5"},Gt={class:"text-xl font-semibold text-ink-gray-9"},Kt={class:"flex gap-2"},qt={class:"relative flex"},Rt={class:"max-md:hidden"},Jt={class:"max-sm:hidden"},Qt={class:"max-md:hidden"},Yt={key:0,class:"col-span-full"},Wt={key:1,class:"col-span-full"},Xt={key:2,class:"grid-col grid gap-3 auto-fill-[220px]"},el={key:3},ol=P({__name:"PageBuilderDashboard",setup(x){const l=ye({attribute:"data-theme"}),e=Ce(l),n=ue(),f=te("displayType","grid"),i=C(!1),u=C(""),m=C(""),b=te("orderBy","creation"),p={creation:"creation desc",modified:"modified desc",alphabetically_a_z:"page_title asc",alphabetically_z_a:"page_title desc"},a=C(new Set),g=C(!1);we(()=>{ee.capture("builder_dashboard_page_visited")}),ke(()=>n.activeFolder,()=>h()),$e(document,"keydown",_=>{_.key==="Escape"&&(a.value.clear(),g.value=!1)});const h=()=>{const _={is_template:0};m.value&&(m.value==="published"?_.published=!0:m.value==="unpublished"?_.published=!1:m.value==="draft"&&(_.draft_blocks=["is","set"]));const s={};u.value&&(s.page_title=["like",`%${u.value}%`],s.route=["like",`%${u.value}%`]),n.activeFolder&&(_.project_folder=n.activeFolder),F.update({filters:_,orFilters:s,orderBy:p[b.value]}),F.fetch()},D=()=>{F.next()},W=C(!1),ae=(_,s)=>{if(g.value){if(_.preventDefault(),_.stopPropagation(),W.value){W.value=!1;return}if(_.shiftKey){const S=F.data||[],B=a.value.size?S.find(I=>I.name===Array.from(a.value)[0]):null;if(B){const I=S.indexOf(B),U=S.indexOf(s),q=Math.min(I,U),R=Math.max(I,U);for(let c=q;c<=R;c++){const E=S[c];a.value.add(E.name)}}}else _.ctrlKey||_.metaKey||a.value.clear(),X(s)}else ee.capture("builder_page_opened",{page_name:s.page_name})},se=_=>{g.value=!0,W.value=!0,X(_)},X=_=>{a.value.has(_.name)?a.value.delete(_.name):a.value.add(_.name),a.value.size||(g.value=!1)};Le([u,m,b],h,{debounce:300,immediate:!0});const fe=_=>j(this,null,function*(){G({method:"POST",url:"builder.api.update_page_folder"}).submit({pages:Array.from(a.value),folder_name:_}).then(()=>{var s;for(const S of a.value){const B=(s=F.data)==null?void 0:s.find(I=>I.name===S);B&&(B.project_folder=_)}a.value.clear(),g.value=!1,i.value=!1,n.activeFolder=_})}),N=C(!1);return(_,s)=>{var q,R;const S=z("FeatherIcon"),B=z("BuilderButton"),I=z("router-link"),U=z("BuilderInput");return r(),v("div",Ht,[t("div",Tt,[t("div",null,[d(le,{modelValue:N.value,"onUpdate:modelValue":s[1]||(s[1]=c=>N.value=c),style:{"z-index":"40"},class:"[&>div>div[id^=headlessui-dialog-panel]]:my-3",options:{title:"Settings",size:"5xl"}},{body:y(()=>[d(Se,{onClose:s[0]||(s[0]=c=>N.value=!1),onlyGlobal:!0})]),_:1},8,["modelValue"]),t("div",Ut,[d(o(Y),{options:[{group:"Builder",hideLabel:!0,items:[{label:"New Page",onClick:()=>_.$router.push({name:"builder",params:{pageId:"new"}}),icon:"plus"}]},{group:"Options",hideLabel:!0,items:[{label:"Apps",component:Ee,icon:"grid"},{label:"Toggle Theme",onClick:()=>o(e)(),icon:o(l)?"sun":"moon"},{label:"Toggle Sidebar",onClick:()=>o(n).showDashboardSidebar=!o(n).showDashboardSidebar,icon:"sidebar"},{label:"Settings",onClick:()=>N.value=!0,icon:"settings"}]},{group:"Help",hideLabel:!0,items:[{label:"Help",onClick:()=>{_.window.open("https://t.me/frappebuilder")},icon:"info"}]}],size:"sm",class:"flex-1 [&>div>div>div]:w-full",placement:"right"},{default:y(({open:c})=>[t("div",Zt,[s[11]||(s[11]=t("img",{src:Be,alt:"logo",class:"h-7"},null,-1)),s[12]||(s[12]=t("h1",{class:"text-md mt-[2px] font-semibold leading-5 text-gray-800 dark:text-gray-200"}," Builder ",-1)),d(S,{name:c?"chevron-up":"chevron-down",class:"h-4 w-4 !text-gray-700 dark:!text-gray-200"},null,8,["name"])])]),_:1},8,["options"])])]),d(I,{to:{name:"builder",params:{pageId:"new"}},onClick:s[2]||(s[2]=()=>{o(ee).capture("builder_new_page_created")})},{default:y(()=>[d(B,{variant:"solid",iconLeft:"plus",class:"bg-surface-gray-7 !text-ink-white hover:bg-surface-gray-6"},{default:y(()=>s[13]||(s[13]=[L(" New ")])),_:1,__:[13]})]),_:1})],512),t("div",Nt,[M(d(ct,{onOpenSettings:s[3]||(s[3]=c=>N.value=!0)},null,512),[[T,o(n).showDashboardSidebar]]),t("div",Et,[t("section",jt,[t("div",Ot,[t("h1",Gt,k(o(n).activeFolder||"All Pages"),1),t("div",Kt,[t("div",null,[M(d(B,{variant:"solid",onClick:s[4]||(s[4]=c=>i.value=!0)},{default:y(()=>s[14]||(s[14]=[L(" Move To Folder ")])),_:1,__:[14]},512),[[T,g.value&&a.value.size]])]),M(t("div",qt,[d(U,{class:"w-48",type:"text",placeholder:"Filter by title or route",modelValue:u.value,"onUpdate:modelValue":s[5]||(s[5]=c=>u.value=c),autofocus:"",onInput:s[6]||(s[6]=c=>{u.value=c})},{prefix:y(()=>[d(S,{name:"search",class:"size-4 text-ink-gray-5"})]),_:1},8,["modelValue"])],512),[[T,!g.value]]),M(t("div",Rt,[d(U,{type:"select",class:"w-24",modelValue:m.value,"onUpdate:modelValue":s[7]||(s[7]=c=>m.value=c),options:[{label:"All",value:""},{label:"Draft",value:"draft"},{label:"Published",value:"published"},{label:"Unpublished",value:"unpublished"}]},null,8,["modelValue"])],512),[[T,!g.value]]),M(t("div",Jt,[d(U,{type:"select",class:"w-32",modelValue:o(b),"onUpdate:modelValue":s[8]||(s[8]=c=>J(b)?b.value=c:null),options:[{label:"Sort",value:"",disabled:!0},{label:"Last Created",value:"creation"},{label:"Last Modified",value:"modified"},{label:"Alphabetically (A-Z)",value:"alphabetically_a_z"},{label:"Alphabetically (Z-A)",value:"alphabetically_z_a"}]},null,8,["modelValue"])],512),[[T,!g.value]]),t("div",Qt,[d(Me,{class:"[&>div]:min-w-0",options:[{label:"Grid",value:"grid",icon:"grid",hideLabel:!0},{label:"List",value:"list",icon:"list",hideLabel:!0}],modelValue:o(f),"onUpdate:modelValue":s[9]||(s[9]=c=>J(f)?f.value=c:null)},null,8,["modelValue"])])])]),t("div",null,[!((q=o(F).data)!=null&&q.length)&&!u.value&&!m.value?(r(),v("div",Yt,s[15]||(s[15]=[t("p",{class:"mt-4 px-3 text-base text-gray-500"},` You don't have any pages yet. Click on the "+ New" button to create a new page. `,-1)]))):(R=o(F).data)!=null&&R.length?V("",!0):(r(),v("div",Wt,s[16]||(s[16]=[t("p",{class:"mt-4 text-base text-gray-500"},"No matching pages found.",-1)]))),o(f)==="grid"?(r(),v("div",Xt,[(r(!0),v(Z,null,K(o(F).data,c=>M((r(),$(xt,{selected:a.value.has(c.name),onClickCapture:E=>ae(E,c),key:c.page_name,page:c},null,8,["selected","onClickCapture","page"])),[[o(ie),()=>se(c)]])),128))])):V("",!0),o(f)==="list"?(r(),v("div",el,[(r(!0),v(Z,null,K(o(F).data,c=>M((r(),$(At,{onClickCapture:E=>ae(E,c),selected:a.value.has(c.name),key:c.page_name,page:c},null,8,["onClickCapture","selected","page"])),[[o(ie),()=>se(c)]])),128))])):V("",!0)]),M(d(B,{class:"m-auto mt-12 w-fit text-sm",onClick:D,variant:"subtle",size:"sm"},{default:y(()=>s[17]||(s[17]=[L(" Load More ")])),_:1,__:[17]},512),[[T,o(F).hasNextPage]])])])]),d(mt,{modelValue:i.value,"onUpdate:modelValue":s[10]||(s[10]=c=>i.value=c),currentFolder:o(n).activeFolder,onFolderSelected:fe},null,8,["modelValue","currentFolder"])])}}});export{ol as default};
//# sourceMappingURL=PageBuilderDashboard-CRkURn-_.js.map
